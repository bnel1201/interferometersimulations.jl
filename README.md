---
title: InterferometerSimulations a small framework for simulating x-ray grating interferometry in Julia
author: Brandon J. Nelson
---


## Getting Started

1. after cloning this repo `cd interferometersimulations.jl` to enter the repo directory and With [Julia](https://julialang.org/) installed, activate the Julia in the environment:
```bash
$ julia --project=.
```
2. Enter the Julia package manage by entering `]`, (the prompt should change from `julia>` to `pkg>`) and `instantiate` the environment to install all relevant packages
```
pkg> instantiate
```
3. run a sample script (be sure to include `--project=.` to use the current environment while running the script)

if you are still in the Julia command prompt, run a script using the `include` command:

```julia
julia> include("scripts/make_psc.jl)
```

The output of this script are the object and reference phase step curves in [nrrd](https://teem.sourceforge.net/nrrd/format.html) format, which can be opened easily by [ImageJ](https://imagej.net/libs/scifio), [3DSlicer](https://slicer.readthedocs.io/en/v4.11/user_guide/data_loading_and_saving.html), [Python](https://pypi.org/project/pynrrd/), [Matlab](https://www.mathworks.com/help/medical-imaging/ref/nrrdread.html), ...

if you have exited Julia, you can run the script from bash or command prompt by first calling Julia (with the `--project=.` flag to start Julia in the current project with all the packages installed), followed by the script, e.g.:

```bash
$ julia --project=.  scripts/make_psc.jl
```

## Further Explorations

1. try the next script with noise and inhomogenous phase gradients

```bash
$ julia --project=.  scripts/make_more_realistic_psc.jl
```

2. try in interactive mode by starting julia in the environment: `julia --project=.` then run scripts (for more information on Julia please see: <https://docs.julialang.org/en/v1/manual/getting-started/>

```julia
julia> include("scripts/make_more_realistic_psc.jl")
```

3. Try Jupyterlab to try the jupyter notebooks in the `notebooks` dir

In Julia, enter the package manager again with `]` and `add` `IJulia`, "interactive Julia", then `build IJulia` to install jupyterlab

```julia
pkg> add IJulia
pkg> build IJulia
```

enter `backspace` to return to the normal `julia>` prompt and enter jupyterlab in the current directory:

```julia
using IJulia
jupyterlab(dir=".")
```

From there navigate to the `notebooks` folder and open the `notebooks.ExampleUsage.ipynb` notebook and explore it.

## Summary

X-rays are an energetic form of light with wavelengths 10,000 times shorter than visible light. A useful property of x-rays is that biological tissues being mostly made of water and low atomic number materials are partially transparent to x-rays. This *partial* transparency is important because the x-rays that pass through biological tissue contain information about the content and structure of the material they passed through which is why the most common use of x-rays is for medical imaging. X-ray radiographs are shadow cast images of the imaged anatomy and have a broad range of diagnostic and interventional applications from mammography, chest imaging to detect pneumonia, musculoskeletal imaging to detect bone fractures etc... 

The primary physical interaction of x-rays that has been used to generate images since their discovery by Wilhelm Roentgen in 1901 has been that of x-ray absorption. An x-ray radriograph is thus a 2D map of the x-rays removed from the incident beam by photoelectric absorption or Compton scatter. An altenative x-ray contrast has to do with x-ray refraction and phase shifts.

This package is used to generate simple simulations of raw data generated by a common phase - sensitive x-ray imaging device, a grating interferometer. The simulated data can then be used to develop phase retrieval and tomographic image processing routines.
